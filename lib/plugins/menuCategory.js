// âš ï¸ Warning: Strictly warning!
// Don't change the name of this file or your some commands won't work!

function cmdName() {
  return {
    name: ['categories'],
    alias: [],
    category: 'general',
    desc: "It's an autogenerated command only for system use."
  };
}


async function getCommand(pickRandom, prefix, command, anyaV2, pika){
require('../../config');
//  if (command == 'categories') return pika.reply("âŒ Can't exicute an auto generated command.");
  const fs = require('fs');
  const path = require('path');
  const { tiny, fancy32 } = require('../lib/stylish-font');
  const currentVersion = require('../../package.json').version;
  const pluginsPath = path.join(__dirname, './');
  const plugins = {};

  fs.readdirSync(pluginsPath)
  .filter((file) => file.endsWith('.js'))
  .forEach((file) => {
    const pluginName = path.parse(file).name;
    plugins[pluginName] = require(path.join(pluginsPath, file));
  });

  function getCommandsByCategory(plugins, category) {
  const commands = [];
  for (const pluginGroupName in plugins) {
    const pluginGroup = plugins[pluginGroupName];
    const categoryName = pluginGroup.cmdName().category;
    if (categoryName === category) {
      const commandName = pluginGroup.cmdName().name;
      if (Array.isArray(commandName)) {
        commands.push(...commandName);
      } else {
        commands.push(commandName);
      }
    }
  }
  return commands;
}

 const commandsInCategory = getCommandsByCategory(plugins, command.split('menu')[0]);
  if (!commandsInCategory.length > 0) return pika.reply('âŒ No such category exists in my database.');
  let mCate = `â•­â”€â”€â”€â¬ ${fancy32(ownername)} â­â”€â”„â”„â”ˆâ€¢\n`;
    mCate += `â”‚   â•­â”€â”€â”€â”€â”€â”€â”€â”„â”„â”ˆâ€¢\n`;
    mCate += `â”‚ ğŸ‘¤ *${tiny("Botname")} :* ${botname}\n`;
    mCate += `â”‚ ğŸ *${tiny("Version")} :* v${currentVersion}\n`;
    mCate += `â”‚ â›©ï¸ *${tiny("Category")} :* ${command}\n`;
    mCate += `â”‚ âœ¨ *${tiny("Commands")} :* ${commandsInCategory.length}\n`;
    mCate += `â”‚   â•°â”€â”€â”€â”€â”€â”€â”€â”„â”„â”ˆâ€¢\n`;
    mCate += `â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”„â”„â”ˆâ€¢\n\n`;    
    mCate += `\`\`\`ğŸ”– Commands from mentioned category:\`\`\`\n\n`;
    mCate += `â•­â”€â”€âŒˆ ã‚³ãƒãƒ³ãƒ‰/ãƒ¡ãƒ‹ãƒ¥ãƒ¼ âŒ‹â”€â•¼â›¦\n`;
    mCate += `â”‚  â•­â”€â”ˆâ€¢\n`;
   for (let i of commandsInCategory) {
    mCate += `â”‚  â”‚â€¢${themeemoji} ${tiny(i)}\n`;
   }
    mCate += `â”‚  â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â¦\n`;
    mCate += `â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¼â–£`;
    pika.reply(mCate +
               `\n\n_Type *${prefix}help <command>* to Know more._\n` +
               `*e.g:* ${prefix}help ${commandsInCategory[0]}`,
           );
      }
module.exports = { cmdName, getCommand }



